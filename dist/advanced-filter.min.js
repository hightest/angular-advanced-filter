/*!
 * angular-ht-advanced-filter
 * https://github.com/hightest/angular-advanced-filter
 * Version: 0.0.1 - 2015-03-19T15:37:05.884Z
 * License: 
 */
!function(){function e(e,t,n){function r(e){for(var t={},n=e.length,r=0;n>r;++r){var i=e[r];i.value.length&&(angular.isUndefined(t[i.filter])&&(t[i.filter]={}),angular.isDefined(t[i.filter][i.field])?(Array.isArray(t[i.filter][i.field])||(t[i.filter][i.field]=[t[i.filter][i.field]]),t[i.filter][i.field].push(i.value)):t[i.filter][i.field]=i.value)}return t}function i(e){for(var t=v.select,n=t.length,r=0;n>r;++r)for(var i=t[r],l=i.options.length,a=0;l>a;++a){var f=i.options[a];if(angular.isDefined(f.selected)&&f.selected){var o=f.type,c=f.field,u=f.value;angular.isDefined(e[o])||(e[o]={}),angular.isDefined(e[o][c])&&(e[o][c].length>0||angular.isNumber(e[o][c]))?(Array.isArray(e[o][c])||(e[o][c]=[e[o][c]]),e[o][c].push(u)):e[o][c]=u}}return e}function l(e){var t=[];return angular.forEach(e,function(n,r){Array.isArray(n)&&angular.forEach(n,function(n){var i=angular.copy(e);i[r]=n,t=t.concat(l(i))})}),0===t.length&&t.push(e),t}function a(){m&&n.cancel(m),m=n(c,500)}function f(e,t,n,r){var i=e.indexOf(".");if(-1===i)r?("undefined"==typeof n[r]&&(n[r]={}),n[r][e]=t):n[e]=t;else{var l=e.split(".",1)[0],a=e.substr(i+1);r&&("undefined"==typeof n[r]&&(n[r]={}),n=n[r]),f(a,t,n,l)}}function o(e){for(var t={},n=Object.keys(e),r=0,i=n.length;i>r;r++)f(n[r],e[n[r]],t);return t}function c(){var e=p.slice(),n=r(v.filters);n=i(n);for(var a in n)if(n.hasOwnProperty(a)){var f=n[a];if(f=l(f),1===f.length)f[0]=o(f[0]),e=t(a)(e,f[0]);else{for(var c=[],u=f.length,s=0;u>s;s++)c=c.concat(t(a)(e,f[s]));for(s=0;s<c.length;s++)for(var d=s+1;d<c.length;d++)c[s]==c[d]&&c.splice(d--,1);e=c}}h.length=0;for(var g=0;g<e.length;g++)h.push(e[g])}function u(){a()}function s(e){v.filters.splice(e,1),c()}function d(){v.filters.push({filter:v.filterTypes[0].value,field:"$",value:""})}var v=this,g=e.htAdvancedFilter,p=g.data,h=g.filteredData;v.fields=[{name:"Wszędzie",value:"$"}],v.fields=v.fields.concat(g.fields),v.select=angular.isDefined(g.select)?g.select:[],v.filters=angular.isDefined(g.filters)?g.filters:[],v.filterTypes=[{name:"Szukaj w",value:"filter"},{name:"Mniejszy od",value:"lessThanOrEqualTo"},{name:"Większy od",value:"greaterThanOrEqualTo"}],v.add=d,v.update=u,v.remove=s,c(),g.filterActive&&d(),e.$watch(function(){return p},function(e,t){e!=t&&a()},!0);var m=null}function t(){return{require:"^ngModel",scope:{htAdvancedFilter:"="},controllerAs:"filter",templateUrl:"advanced-filter.html",controller:e}}function n(e){return function(t,n){return e(t,n,function(e,t){var n=function(e){return!isNaN(parseFloat(e))};return n(e)&&n(t)?e>=t:!1})}}function r(e){return function(t,n){return e(t,n,function(e,t){var n=function(e){return!isNaN(parseFloat(e))};return n(e)&&n(t)?t>=e:!1})}}function i(){return function(e,t){t[0].focus()}}e.$inject=["$scope","$filter","$timeout"],n.$inject=["filterFilter"],r.$inject=["filterFilter"],angular.module("ht.advanced-filter",["ui.bootstrap"]).directive("htAdvancedFilter",t).directive("htFocus",i).filter("greaterThanOrEqualTo",n).filter("lessThanOrEqualTo",r)}(),angular.module("ht.advanced-filter").run(["$templateCache",function(e){e.put("advanced-filter.html",'<div><div class="form-inline" ng-repeat="object in filter.filters"><div class="form-group"><select class="form-control" ng-model="object.filter" ng-change="filter.update()" ng-options="filterType.value as filterType.name for filterType in filter.filterTypes"></select></div><div class="form-group"><select class="form-control" ng-model="object.field" ng-change="filter.update()" ng-options="field.value as field.name for field in filter.fields"></select></div><div class="form-group"><input class="form-control" ng-change="filter.update()" type="text" ng-model="object.value" ht-focus=""></div><div class="form-group"><span class="glyphicon glyphicon-remove-circle" ng-click="filter.remove($index)"></span></div></div><button type="button" class="btn btn-default" ng-click="filter.add()">Dodaj filtr</button></div><h4 ng-repeat-start="field in filter.select">{{field.name}}</h4><div class="btn-group" ng-repeat-end=""><label ng-repeat="option in field.options" class="btn btn-success" ng-change="filter.update()" ng-model="option.selected" btn-radio="1" btn-checkbox="">{{option.name}}</label></div>')}]);